/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /gh/webflow/brand_studio@a292f6d/global-brand-code/custom-components/inline-video.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class VideoLibrary{constructor(e={}){this.options={rootMargin:e.rootMargin||"300px",threshold:e.threshold||0,scrollTriggerThreshold:e.scrollTriggerThreshold||.5,debug:e.debug||!1,...e},this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.videoObserver=null,this.scrollObservers=new Map,this.init()}init(){if(0===document.querySelectorAll("video[data-video]").length)return void(this.options.debug&&console.log("VideoLibrary: No videos found on page, skipping initialization."));this.prefersReducedMotion&&console.log("User prefers reduced motion. Videos will not auto-play."),this.removeDesktopOnlyVideos(),this.setupLazyLoading(),this.setupVideoControls(),this.setupHoverPlay();document.querySelectorAll('video[data-video-desktop-only="true"]').length>0&&window.addEventListener("resize",(()=>this.removeDesktopOnlyVideos()))}removeDesktopOnlyVideos(){window.innerWidth<=991?document.querySelectorAll('video[data-video-desktop-only="true"]').forEach((e=>{e.style.display="none";const t=e.getAttribute("data-video"),i=e.parentElement,o=i?i.querySelector('[data-video-playback="wrapper"]'):null;if(o)o.style.display="none",o.style.visibility="hidden",o.setAttribute("aria-hidden","true");else{const e=document.querySelector(`[data-video-playback="play"][data-video="${t}"]`),i=document.querySelector(`[data-video-playback="pause"][data-video="${t}"]`);e&&(e.style.display="none",e.style.visibility="hidden",e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1")),i&&(i.style.display="none",i.style.visibility="hidden",i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex","-1"))}})):document.querySelectorAll('video[data-video-desktop-only="true"]').forEach((e=>{e.style.display="";const t=e.getAttribute("data-video"),i=e.parentElement,o=i?i.querySelector('[data-video-playback="wrapper"]'):null;if(o)o.style.display="",o.style.visibility="",o.setAttribute("aria-hidden","false");else{const e=document.querySelector(`[data-video-playback="play"][data-video="${t}"]`),i=document.querySelector(`[data-video-playback="pause"][data-video="${t}"]`);e&&(e.style.display="",e.style.visibility="",e.setAttribute("aria-hidden","false"),e.removeAttribute("tabindex")),i&&(i.style.display="",i.style.visibility="",i.setAttribute("aria-hidden","false"),i.removeAttribute("tabindex"))}}))}setupLazyLoading(){const e=document.querySelectorAll("video[data-video]");if(0===e.length)return;const t={root:null,rootMargin:this.options.rootMargin,threshold:this.options.threshold};this.videoObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const i=e.target;this.lazyLoadVideo(i).then((()=>t.unobserve(i))).catch(console.error)}}))}),t),e.forEach((e=>{const t="true"===e.getAttribute("data-video-scroll-in-play");"true"===e.getAttribute("data-video-hover")||(this.prefersReducedMotion?e.pause():t?(this.videoObserver.observe(e),this.setupScrollInPlay(e)):(this.videoObserver.observe(e),this.setupAutoplay(e)))}))}lazyLoadVideo(e){return new Promise(((t,i)=>{const o=e.querySelector("source[data-src]");o&&!o.src?(o.src=o.getAttribute("data-src"),e.load(),e.addEventListener("canplaythrough",(function i(){e.removeEventListener("canplaythrough",i),t()})),e.addEventListener("error",(function t(){e.removeEventListener("error",t),i(new Error(`Error loading video: ${o.src}`))}))):t()}))}showPictureElement(e){const t=e.getAttribute("data-video");if(!t)return;const i=this.findPictureElement(e,t);i&&(i.style.opacity="1",this.options.debug&&console.log(`Faded in picture element for video: ${t}`))}hidePictureElement(e){const t=e.getAttribute("data-video");if(!t)return;const i=this.findPictureElement(e,t);i&&(i.style.opacity="0",this.options.debug&&console.log(`Faded out picture element for video: ${t}`))}findPictureElement(e,t){let i=e.previousElementSibling;for(;i;){if("PICTURE"===i.tagName&&i.getAttribute("data-video-picture")===t)return i;i=i.previousElementSibling}const o=e.parentElement;if(o){const e=o.querySelector(`picture[data-video-picture="${t}"]`);if(e)return e}return document.querySelector(`picture[data-video-picture="${t}"]`)}setupVideoControls(){document.querySelectorAll("video[data-video]").forEach((e=>{this.handlePlaybackButtons(e)}))}setupHoverPlay(){document.querySelectorAll('video[data-video-hover="true"]').forEach((e=>{const t=e.getAttribute("data-video");if(!t)return;const i=e.closest(`[data-video-trigger="${t}"]`);if(i){const o=e.parentElement;if(o){const e=o.querySelector(`[data-video-playback="play"][data-video="${t}"]`),i=o.querySelector(`[data-video-playback="pause"][data-video="${t}"]`);e&&(e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1")),i&&(i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex","-1"))}i.addEventListener("mouseenter",(async()=>{if(!this.prefersReducedMotion)try{this.hidePictureElement(e),await this.lazyLoadVideo(e),e.currentTime=0,e.play()}catch(e){console.error(`Error playing hover video ${t}:`,e)}})),i.addEventListener("mouseleave",(()=>{e.pause(),this.showPictureElement(e)}))}}))}setupAutoplay(e){e.addEventListener("canplaythrough",(()=>{this.prefersReducedMotion||(this.hidePictureElement(e),e.play().catch(console.error))}))}setupScrollInPlay(e){const t=new IntersectionObserver((async t=>{t.forEach((async t=>{if(t.isIntersecting)try{await this.lazyLoadVideo(e),this.prefersReducedMotion||(this.hidePictureElement(e),e.currentTime=0,e.play())}catch(e){console.error(e)}else e.pause(),this.showPictureElement(e)}))}),{threshold:this.options.scrollTriggerThreshold});t.observe(e),this.scrollObservers.set(e,t)}handlePlaybackButtons(e){const t=e.getAttribute("data-video"),i=e.parentElement;let o=i?i.querySelector(`[data-video-playback="play"][data-video="${t}"]`):null,r=i?i.querySelector(`[data-video-playback="pause"][data-video="${t}"]`):null;if(o||(o=document.querySelector(`[data-video-playback="play"][data-video="${t}"]`)),r||(r=document.querySelector(`[data-video-playback="pause"][data-video="${t}"]`)),!o||!r)return;const a=e=>{e?(o.style.display="none",o.style.visibility="hidden",o.setAttribute("aria-hidden","true"),o.setAttribute("tabindex","-1"),r.style.display="flex",r.style.visibility="visible",r.setAttribute("aria-hidden","false"),r.removeAttribute("tabindex")):(o.style.display="flex",o.style.visibility="visible",o.setAttribute("aria-hidden","false"),o.removeAttribute("tabindex"),r.style.display="none",r.style.visibility="hidden",r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1"))};a(!e.paused),o.addEventListener("click",(async t=>{t.stopPropagation();try{await this.lazyLoadVideo(e),this.hidePictureElement(e),e.play(),a(!0)}catch(e){console.error(e)}})),r.addEventListener("click",(t=>{t.stopPropagation(),e.pause(),a(!1)})),e.addEventListener("play",(()=>a(!0))),e.addEventListener("pause",(()=>a(!1)))}async playVideo(e){const t=document.querySelector(`video[data-video="${e}"]`);if(t)try{await this.lazyLoadVideo(t),this.prefersReducedMotion||(this.hidePictureElement(t),t.currentTime=0,t.play())}catch(t){console.error(`Error playing video ${e}:`,t)}else console.warn(`Video with id "${e}" not found`)}pauseVideo(e){const t=document.querySelector(`video[data-video="${e}"]`);t?t.pause():console.warn(`Video with id "${e}" not found`)}pauseAllVideos(){document.querySelectorAll("video[data-video]").forEach((e=>{e.pause()}))}destroy(){this.videoObserver&&this.videoObserver.disconnect(),this.scrollObservers.forEach((e=>{e.disconnect()})),this.scrollObservers.clear()}reinitialize(){this.destroy(),this.init()}}function initializeVideoLibrary(){document.querySelectorAll("video[data-video]").length>0?window.videoLibrary=new VideoLibrary:window.VideoLibraryConfig?.debug&&console.log("VideoLibrary: No videos detected, skipping auto-initialization.")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initializeVideoLibrary):initializeVideoLibrary(),"undefined"!=typeof module&&module.exports&&(module.exports=VideoLibrary);
//# sourceMappingURL=/sm/2c21c7ab903696a9aea16be9c5a7cb7ea8cf84cf93b2221f464100d74c892b2b.map